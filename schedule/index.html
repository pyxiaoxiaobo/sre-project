<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>调度 - SREUDP 接口文档</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "\u8c03\u5ea6";
    var mkdocs_page_input_path = "schedule.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> SREUDP 接口文档</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">主页</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../user/">用户</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">调度</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#_1">运行日志</a></li>
    

    <li class="toctree-l2"><a href="#_2">最近使用</a></li>
    

    <li class="toctree-l2"><a href="#_3">历史工具使用曲线</a></li>
    

    <li class="toctree-l2"><a href="#_4">工具使用排名</a></li>
    

    <li class="toctree-l2"><a href="#_5">总使用次数</a></li>
    

    <li class="toctree-l2"><a href="#_6">运行</a></li>
    

    <li class="toctree-l2"><a href="#_7">查询运行状态</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../authority/">权限</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../about/">关于</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">SREUDP 接口文档</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>调度</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="_1">运行日志</h1>
<p>url:/schedule/log/</p>
<p>方法:GET</p>
<p>请求参数:<br>
每页数据个数：page_size<br>
当前页：current_page<br>
不填 默认 6和1<br></p>
<pre><code>{
    &quot;status&quot;: 1,
    &quot;data&quot;: {
        &quot;count&quot;: 12,
        &quot;num_pages&quot;: 2,
        &quot;info&quot;: [
            {
                &quot;username&quot;: &quot;sunbo&quot;,
                &quot;run_time&quot;: &quot;2019-12-26T14:15:14.781&quot;,
                &quot;tname&quot;: &quot;yidong&quot;,
                &quot;status&quot;: &quot;SUCCESS&quot;,
                &quot;id&quot;: 1,
                &quot;task_id&quot;: &quot;86bc60d6-3f73-4381-97e6-b474305432f5&quot;,
                &quot;result&quot;: &quot;{\&quot;data\&quot;: [{\&quot;type\&quot;: \&quot;table\&quot;, \&quot;title\&quot;: \&quot;\用\户\信\息\表\&quot;, \&quot;columns\&quot;: [\&quot;\名\称\&quot;, \&quot;\值\&quot;], \&quot;rows\&quot;: [[\&quot;SUBID\&quot;, \&quot;+8657156150671@ims.zj.chinamobile.com\&quot;], [\&quot;CAP\&quot;, \&quot;[201,301]\&quot;], [\&quot;IMPI\&quot;, \&quot;+8657156150671@ims.zj.chinamobile.com\&quot;], [\&quot;IMPU\&quot;, \&quot;[sip:+8657156150671@ims.zj.chinamobile.com,tel:+8657156150671]\&quot;], [\&quot;VNT\&quot;, \&quot;1\&quot;], [\&quot;Sifc\&quot;, \&quot;[91]\&quot;]]}, {\&quot;type\&quot;: \&quot;Histogram\&quot;, \&quot;title\&quot;: \&quot;\用\户\信\息\图\&quot;, \&quot;columns\&quot;: [\&quot;\日\期\&quot;, \&quot;\成\本\&quot;, \&quot;\利\润\&quot;], \&quot;rows\&quot;: [[\&quot;1\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;], [\&quot;2\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;], [\&quot;3\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;]]}]}&quot;
            },
            {
                &quot;username&quot;: &quot;sunbo&quot;,
                &quot;run_time&quot;: &quot;2019-12-26T14:16:19.463&quot;,
                &quot;tname&quot;: &quot;yidong&quot;,
                &quot;status&quot;: &quot;SUCCESS&quot;,
                &quot;id&quot;: 2,
                &quot;task_id&quot;: &quot;065f03f5-e70c-4432-9845-d7cb9cdffb1c&quot;,
                &quot;result&quot;: &quot;{\&quot;data\&quot;: [{\&quot;type\&quot;: \&quot;table\&quot;, \&quot;title\&quot;: \&quot;\用\户\信\息\表\&quot;, \&quot;columns\&quot;: [\&quot;\名\称\&quot;, \&quot;\值\&quot;], \&quot;rows\&quot;: [[\&quot;SUBID\&quot;, \&quot;+8657156150671@ims.zj.chinamobile.com\&quot;], [\&quot;CAP\&quot;, \&quot;[201,301]\&quot;], [\&quot;IMPI\&quot;, \&quot;+8657156150671@ims.zj.chinamobile.com\&quot;], [\&quot;IMPU\&quot;, \&quot;[sip:+8657156150671@ims.zj.chinamobile.com,tel:+8657156150671]\&quot;], [\&quot;VNT\&quot;, \&quot;1\&quot;], [\&quot;Sifc\&quot;, \&quot;[91]\&quot;]]}, {\&quot;type\&quot;: \&quot;Histogram\&quot;, \&quot;title\&quot;: \&quot;\用\户\信\息\图\&quot;, \&quot;columns\&quot;: [\&quot;\日\期\&quot;, \&quot;\成\本\&quot;, \&quot;\利\润\&quot;], \&quot;rows\&quot;: [[\&quot;1\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;], [\&quot;2\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;], [\&quot;3\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;]]}]}&quot;
            },
            {
                &quot;username&quot;: &quot;sunbo&quot;,
                &quot;run_time&quot;: &quot;2019-12-26T14:16:30.406&quot;,
                &quot;tname&quot;: &quot;yidong&quot;,
                &quot;status&quot;: &quot;SUCCESS&quot;,
                &quot;id&quot;: 3,
                &quot;task_id&quot;: &quot;379716d1-5abf-484a-a524-8f8c91d518b4&quot;,
                &quot;result&quot;: &quot;{\&quot;data\&quot;: [{\&quot;type\&quot;: \&quot;table\&quot;, \&quot;title\&quot;: \&quot;\用\户\信\息\表\&quot;, \&quot;columns\&quot;: [\&quot;\名\称\&quot;, \&quot;\值\&quot;], \&quot;rows\&quot;: [[\&quot;SUBID\&quot;, \&quot;+8657156150671@ims.zj.chinamobile.com\&quot;], [\&quot;CAP\&quot;, \&quot;[201,301]\&quot;], [\&quot;IMPI\&quot;, \&quot;+8657156150671@ims.zj.chinamobile.com\&quot;], [\&quot;IMPU\&quot;, \&quot;[sip:+8657156150671@ims.zj.chinamobile.com,tel:+8657156150671]\&quot;], [\&quot;VNT\&quot;, \&quot;1\&quot;], [\&quot;Sifc\&quot;, \&quot;[91]\&quot;]]}, {\&quot;type\&quot;: \&quot;Histogram\&quot;, \&quot;title\&quot;: \&quot;\用\户\信\息\图\&quot;, \&quot;columns\&quot;: [\&quot;\日\期\&quot;, \&quot;\成\本\&quot;, \&quot;\利\润\&quot;], \&quot;rows\&quot;: [[\&quot;1\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;], [\&quot;2\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;], [\&quot;3\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;]]}]}&quot;
            },
            {
                &quot;username&quot;: &quot;sunbo&quot;,
                &quot;run_time&quot;: &quot;2019-12-26T14:16:58.263&quot;,
                &quot;tname&quot;: &quot;yidong&quot;,
                &quot;status&quot;: &quot;SUCCESS&quot;,
                &quot;id&quot;: 4,
                &quot;task_id&quot;: &quot;617f85f3-477f-4831-b092-c918f64bafa4&quot;,
                &quot;result&quot;: &quot;{\&quot;data\&quot;: [{\&quot;type\&quot;: \&quot;table\&quot;, \&quot;title\&quot;: \&quot;\用\户\信\息\表\&quot;, \&quot;columns\&quot;: [\&quot;\名\称\&quot;, \&quot;\值\&quot;], \&quot;rows\&quot;: [[\&quot;SUBID\&quot;, \&quot;+8657156150671@ims.zj.chinamobile.com\&quot;], [\&quot;CAP\&quot;, \&quot;[201,301]\&quot;], [\&quot;IMPI\&quot;, \&quot;+8657156150671@ims.zj.chinamobile.com\&quot;], [\&quot;IMPU\&quot;, \&quot;[sip:+8657156150671@ims.zj.chinamobile.com,tel:+8657156150671]\&quot;], [\&quot;VNT\&quot;, \&quot;1\&quot;], [\&quot;Sifc\&quot;, \&quot;[91]\&quot;]]}, {\&quot;type\&quot;: \&quot;Histogram\&quot;, \&quot;title\&quot;: \&quot;\用\户\信\息\图\&quot;, \&quot;columns\&quot;: [\&quot;\日\期\&quot;, \&quot;\成\本\&quot;, \&quot;\利\润\&quot;], \&quot;rows\&quot;: [[\&quot;1\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;], [\&quot;2\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;], [\&quot;3\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;]]}]}&quot;
            },
            {
                &quot;username&quot;: &quot;sunbo&quot;,
                &quot;run_time&quot;: &quot;2019-12-26T14:17:21.092&quot;,
                &quot;tname&quot;: &quot;yidong&quot;,
                &quot;status&quot;: &quot;SUCCESS&quot;,
                &quot;id&quot;: 5,
                &quot;task_id&quot;: &quot;c8903b5e-7df6-4e73-b023-478dc99d3894&quot;,
                &quot;result&quot;: &quot;{\&quot;data\&quot;: [{\&quot;type\&quot;: \&quot;table\&quot;, \&quot;title\&quot;: \&quot;\用\户\信\息\表\&quot;, \&quot;columns\&quot;: [\&quot;\名\称\&quot;, \&quot;\值\&quot;], \&quot;rows\&quot;: [[\&quot;SUBID\&quot;, \&quot;+8657156150671@ims.zj.chinamobile.com\&quot;], [\&quot;CAP\&quot;, \&quot;[201,301]\&quot;], [\&quot;IMPI\&quot;, \&quot;+8657156150671@ims.zj.chinamobile.com\&quot;], [\&quot;IMPU\&quot;, \&quot;[sip:+8657156150671@ims.zj.chinamobile.com,tel:+8657156150671]\&quot;], [\&quot;VNT\&quot;, \&quot;1\&quot;], [\&quot;Sifc\&quot;, \&quot;[91]\&quot;]]}, {\&quot;type\&quot;: \&quot;Histogram\&quot;, \&quot;title\&quot;: \&quot;\用\户\信\息\图\&quot;, \&quot;columns\&quot;: [\&quot;\日\期\&quot;, \&quot;\成\本\&quot;, \&quot;\利\润\&quot;], \&quot;rows\&quot;: [[\&quot;1\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;], [\&quot;2\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;], [\&quot;3\月\&quot;, \&quot;1523\&quot;, \&quot;1234\&quot;]]}]}&quot;
            },
            {
                &quot;username&quot;: &quot;sunbo&quot;,
                &quot;run_time&quot;: &quot;2019-12-26T14:48:35.057&quot;,
                &quot;tname&quot;: &quot;gongju3&quot;,
                &quot;status&quot;: &quot;FAILURE&quot;,
                &quot;id&quot;: 30,
                &quot;task_id&quot;: &quot;e37f6311-6801-42c4-9815-809f0871af69&quot;,
                &quot;result&quot;: &quot;Traceback (most recent call last):\n  File \&quot;/Users/sunbo/Desktop/sunbo/yidong/sre-udp/celery_tasks/tasks.py\&quot;, line 32, in run_script\n    rl.sace()\nAttributeError: 'RunLog' object has no attribute 'sace'\n&quot;
            }
        ]
    },
    &quot;msg&quot;: &quot;查询成功&quot;
}
</code></pre>

<h1 id="_2">最近使用</h1>
<p>url:/schedule/recent/</p>
<p>方法:GET</p>
<p>请求参数:无<br></p>
<pre><code>{
    &quot;status&quot;: 1,
    &quot;data&quot;: [
        {
            &quot;tool_id&quot;: 15,
            &quot;tool_name&quot;: &quot;gongju3&quot;
        },
        {
            &quot;tool_id&quot;: 32,
            &quot;tool_name&quot;: &quot;yidong&quot;
        },
        {
            &quot;tool_id&quot;: 15,
            &quot;tool_name&quot;: &quot;gongju3&quot;
        },
        {
            &quot;tool_id&quot;: 32,
            &quot;tool_name&quot;: &quot;yidong&quot;
        }
    ],
    &quot;msg&quot;: &quot;查询成功&quot;
}
</code></pre>

<h1 id="_3">历史工具使用曲线</h1>
<p>url:/schedule/number/history/</p>
<p>方法:GET</p>
<p>请求参数:<br>
search_info: 查询参数<br>
year 查询最近十二个月的历史数据<br>
month 查询最近30天的历史数据<br>
day 查询最近7天历史数据<br>
不填默认最近7天数据<br></p>
<pre><code>{
    &quot;status&quot;: 1,
    &quot;data&quot;: [
        {
            &quot;day&quot;: &quot;2019-12-06&quot;,
            &quot;number&quot;: 6
        },
        {
            &quot;day&quot;: &quot;2019-12-07&quot;,
            &quot;numbers&quot;: 0
        },
        {
            &quot;day&quot;: &quot;2019-12-08&quot;,
            &quot;numbers&quot;: 0
        },
        {
            &quot;day&quot;: &quot;2019-12-09&quot;,
            &quot;number&quot;: 171
        },
        {
            &quot;day&quot;: &quot;2019-12-10&quot;,
            &quot;number&quot;: 60
        },
        {
            &quot;day&quot;: &quot;2019-12-11&quot;,
            &quot;numbers&quot;: 0
        },
        {
            &quot;day&quot;: &quot;2019-12-12&quot;,
            &quot;numbers&quot;: 0
        },
        {
            &quot;day&quot;: &quot;2019-12-13&quot;,
            &quot;numbers&quot;: 0
        }
    ],
    &quot;msg&quot;: &quot;查询成功&quot;
}
</code></pre>

<h1 id="_4">工具使用排名</h1>
<p>url:/schedule/rank/</p>
<p>方法:GET</p>
<p>请求参数:<br>
order_way: 排序方式<br>
1 ： 正序<br>
-1   倒序<br></p>
<pre><code>{
    &quot;status&quot;: 1,
    &quot;data&quot;: [
        {
            &quot;tool_name&quot;: &quot;工具55555&quot;,
            &quot;total&quot;: 14
        },
        {
            &quot;tool_name&quot;: &quot;工具1&quot;,
            &quot;total&quot;: 33
        },
        {
            &quot;tool_name&quot;: &quot;gongju3&quot;,
            &quot;total&quot;: 188
        }
    ],
    &quot;msg&quot;: &quot;查询成功&quot;
}
</code></pre>

<h1 id="_5">总使用次数</h1>
<p>url:/schedule/number/<br>
参数: 无<br></p>
<p>方法:GET<br>
total_numbers: 总次数<br>
today_numbers: 今日新增次数<br></p>
<pre><code>{
    &quot;status&quot;: 1,
    &quot;data&quot;: {
        &quot;total_numbers&quot;: 603,
        &quot;today_numbers&quot;: 0
    },
    &quot;msg&quot;: &quot;查询成功&quot;
}
</code></pre>

<h1 id="_6">运行</h1>
<p>url:/schedule/run/</p>
<p>方法:POST</p>
<p>请求参数:<br>
id: 工具id<br>
params: 参数 字典格式{}<br></p>
<p>示例：</p>
<pre><code>{
    &quot;status&quot;: 1,
    &quot;data&quot;: {
        &quot;id&quot;: 17,
        &quot;task_id&quot;: &quot;f10e336c-bbb9-4643-9a18-2fdf29fc9a3f&quot;,
        &quot;task_name&quot;: &quot;21574384240&quot;,
        &quot;status&quot;: &quot;PENDING&quot;,
        &quot;result&quot;: &quot;&quot;,
        &quot;create_time&quot;: &quot;2019-11-22T00:57:20.850Z&quot;
    },
    &quot;msg&quot;: &quot;调用成功&quot;
}
</code></pre>

<h1 id="_7">查询运行状态</h1>
<p>url:/schedule/run/</p>
<p>方法:GET</p>
<p>请求参数:<br>
id: 任务id<br></p>
<pre><code>{
    &quot;status&quot;: 1,
    &quot;data&quot;: {
        &quot;id&quot;: 17,
        &quot;task_id&quot;: &quot;f10e336c-bbb9-4643-9a18-2fdf29fc9a3f&quot;,
        &quot;task_name&quot;: &quot;21574384240&quot;,
        &quot;status&quot;: &quot;SUCCESS&quot;,
        &quot;result&quot;: &quot;this is a test&quot;,
        &quot;create_time&quot;: &quot;2019-11-22T00:57:20.850Z&quot;
    },
    &quot;msg&quot;: &quot;查询成功&quot;
}
</code></pre>

<p>PENDING = 'PENDING': 任务准备中<br> 
STARTED = 'STARTED': 任务开始<br> 
SUCCESS = 'SUCCESS': 任务成功<br> 
RUNNING = 'RUNNING': 任务运行中<br> 
FAILURE = 'FAILURE': 任务失败<br> </p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../authority/" class="btn btn-neutral float-right" title="权限">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../user/" class="btn btn-neutral" title="用户"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../user/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../authority/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
